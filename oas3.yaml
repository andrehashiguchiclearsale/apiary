openapi: 3.0.1
info:
  title: Decision API
  description: API of decision.
  version: v1
paths:
  /api/v1/CustomerEntities:
    post:
      tags:
        - CustomerEntities
      summary: Cria uma Entidade. (Criada - Sem alinhamento)
      description: "Precisa de alinhamento"
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.CustomerEntities.Commands.Create.CreateCustomerEntityCommand
          text/json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.CustomerEntities.Commands.Create.CreateCustomerEntityCommand
          application/*+json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.CustomerEntities.Commands.Create.CreateCustomerEntityCommand
      responses:
        '201':
          description: Retorna o novo item criado
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/Decision.Configuration.Application.CustomerEntities.Commands.Create.CustomerEntityResponse
        '400':
          description: Se a entidade não foi criada por dados inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Microsoft.AspNetCore.Mvc.ProblemDetails'
        '500':
          description: Se a entidade não foi criado por erro no servidor
  /api/v1/Features:
    get:
      summary: Recupera todas as Feature utilizando Paginação e/ou filtros. (Em desenvolvimento)
      description: "Utilizar na listagem de Features"
      tags:
        - CustomerEntities
      parameters:
        - name: PageNumber
          description: "Número da página desejada"
          in: query
          schema:
            type: integer
            format: int32
        - name: PageSize
          description: "Quantidade de páginas"
          in: query
          schema:
            type: integer
            format: int32
        - name: Search
          description: "Filtro por campo"
          in: query
          schema:
            type: string
        - name: InitialDate
          description: "Filtro por data inicial"
          in: query
          schema:
            type: string
            format: date-time
        - name: FinalDate
          description: "Filtro por data final"
          in: query
          schema:
            type: string
            format: date-time
        - name: SortAsc
          description: "Campo para ordenação ascendente."
          in: query
          schema:
            type: string            
        - name: SortDesc
          description: "Campo para ordenação descendente."
          in: query
          schema:
            type: string            
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/Decision.Configuration.Application.Commons.Pagination.PagedResponse`1[System.Collections.Generic.List`1[Decision.Configuration.Application.Feature.Commands.Create.FeatureListResponse]]
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Microsoft.AspNetCore.Mvc.ProblemDetails'
        '500':
          description: Server Error
    post:
      tags:
        - Features
      summary: Cria uma Feature.(Criada - Sem alinhamento)
      description: "Precisa de alinhamento"
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.Features.Commands.Create.CreateFeatureCommand
          text/json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.Features.Commands.Create.CreateFeatureCommand
          application/*+json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.Features.Commands.Create.CreateFeatureCommand
      responses:
        '200':
          description: Success
        '201':
          description: Retorna o novo item criado
        '400':
          description: Se o item não for criado
  /api/v1/Features/featureId/Preview:
    get:
      summary: Recupera a Pré-Visualização da feature. (Em desenvolvimento)
      description: "Retorna as informações simplificadas para visualização na listagem quando a Feature é selecionada"
      tags:
        - CustomerEntities
      parameters:
        - name: featureId
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/Decision.Configuration.Application.Features.Commands.Get.FeaturePreviewResponse
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Microsoft.AspNetCore.Mvc.ProblemDetails'
        '500':
          description: Server Error  
  /api/v1/Features/Lookup:   
    get:
      summary: Recupera a listagem de Features sem Paginação e filtros (Em desenvolvimento)
      description: "Utilizar na listagem de combos/lookups de feature"
      tags:
        - CustomerEntities
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/Decision.Configuration.Application.Features.Commands.Get`1[System.Collections.Generic.List`1[Decision.Configuration.Application.Feature.Commands.Get.FeatureLookupResponse]]
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Microsoft.AspNetCore.Mvc.ProblemDetails'
        '500':
          description: Server Error    
  /api/v1/Features/featureId/Version/Lookup:   
    get:
      summary: Recupera a listagem de Versões da Feature sem Paginação e filtros (Em desenvolvimento)
      description: "Utilizar na listagem de combos/lookups de feature version"
      parameters:
        - name: featureId
          in: path
          required: true
          description: "Identificador da Feature"
          schema:
            type: string
            format: uuid      
      tags:
        - CustomerEntities
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/Decision.Configuration.Application.Features.Commands.Get`1[System.Collections.Generic.List`1[Decision.Configuration.Application.Feature.Commands.Get.FeatureVersionLookupResponse]]
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Microsoft.AspNetCore.Mvc.ProblemDetails'
        '500':
          description: Server Error
  /api/v1/Features/featureId/Version/featureVersionId/Variable/Lookup:   
    get:
      summary: Recupera a listagem de Versões da Feature sem Paginação e filtros (Aguardando desenvolvimento)
      description: "Utilizar na listagem de combos/lookups de feature variable"
      parameters:
        - name: featureId
          in: path
          required: true
          description: "Identificador da Feature"
          schema:
            type: string
            format: uuid
        - name: featureVersionId
          in: path
          required: true
          description: "Identificador da Versão da Feature"
          schema:
            type: string
            format: uuid               
      tags:
        - CustomerEntities
      responses:
        '200':
          description: Success
          content:
            application/json:
              schema:
                $ref: >-
                  #/components/schemas/Decision.Configuration.Application.Features.Commands.Get`1[System.Collections.Generic.List`1[Decision.Configuration.Application.Feature.Commands.Get.FeatureVariableLookupResponse]]
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Microsoft.AspNetCore.Mvc.ProblemDetails'
        '500':
          description: Server Error              
  /api/v1/StatisticalModels:
    post:
      tags:
        - StatisticalModels
      summary: Cria um Modelo.(Criada - Sem alinhamento)
      description: "Precisa de alinhamento"
      requestBody:
        description: ''
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.StatisticalModels.Commands.Create.CreateStatisticalModelCommand
          text/json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.StatisticalModels.Commands.Create.CreateStatisticalModelCommand
          application/*+json:
            schema:
              $ref: >-
                #/components/schemas/Decision.Configuration.Application.StatisticalModels.Commands.Create.CreateStatisticalModelCommand
      responses:
        '200':
          description: Success
        '201':
          description: Retorna o novo item criado
        '400':
          description: Se o item não for criado
components:
  schemas:
    Decision.Configuration.Api.Contracts.Fields.Update.UpdateFieldRequest:
      type: object
      properties:
        name:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        length:
          type: integer
          format: int32
          nullable: true
      additionalProperties: false
    Decision.Configuration.API.Contracts.Tests.Unit.RunUnitTestRequest:
      required:
        - data
        - executionEnvironment
        - fieldMappingVersionId
        - subjectType
        - subjectVersionId
      type: object
      properties:
        subjectVersionId:
          type: string
          format: uuid
        subjectType:
          $ref: '#/components/schemas/Decision.Configuration.Domain.Tests.SubjectType'
        data: {}
        fieldMappingVersionId:
          type: string
          format: uuid
        executionEnvironment:
          type: integer
          format: int32
      additionalProperties: false
    Decision.Configuration.API.Models.BatchTests.FinishBatchTestRequest:
      type: object
      properties:
        testId:
          type: string
          format: uuid
      additionalProperties: false
    Decision.Configuration.API.Models.BatchTests.StartBatchTestRequest:
      type: object
      properties:
        subjectType:
          $ref: '#/components/schemas/Decision.Configuration.Domain.Tests.SubjectType'
        subjectVersionId:
          type: string
          format: uuid
        fieldMappingVersionId:
          type: string
          format: uuid
        entityId:
          type: integer
          format: int32
        batchSize:
          type: integer
          format: int32
        executionEnvironment:
          type: integer
          format: int32
      additionalProperties: false
    Decision.Configuration.Application.CustomerEntities.Commands.Create.CreateCustomerEntityCommand:
      type: object
      properties:
        id:
          type: integer
          format: int32
        name:
          type: string
          nullable: true
      additionalProperties: false
    Decision.Configuration.Application.CustomerEntities.Commands.Create.CustomerEntityResponse:
      type: object
      properties:
        id:
          type: integer
          format: int32
        name:
          type: string
          nullable: true
      additionalProperties: false
    Decision.Configuration.Application.Commons.Pagination.PagedResponse`1[System.Collections.Generic.List`1[Decision.Configuration.Application.Feature.Commands.Create.FeatureListResponse]]:
      type: object
      properties:
        pageNumber:
          type: integer
          format: int32
        pageSize:
          type: integer
          format: int32
        totalPages:
          type: integer
          format: int32
        totalRecords:
          type: integer
          format: int32
        data:
          type: array
          items:
            type: array
            items:
              $ref: '#/components/schemas/Decision.Configuration.Application.Features.Commands.Get.FeatureListResponse'
          nullable: true
      additionalProperties: false
    Decision.Configuration.Application.Features.Commands.Get.FeatureListResponse:
      type: object
      properties:
        id:
          type: string
          description: "Identificador da Feature"
          nullable: uuid      
        name:
          type: string
          description: "Nome da Feature"
          nullable: true
        version:
          description: "Versão da Feature utilizando o padrão [SemVer](https://semver.org/)"
          type: string
          nullable: true            
        sqlConnection:
          description: "Nome da conexão SQL"
          type: string
          nullable: true
        lastUpdateUserId:
          type: string
          description: "Usuário que realizou a última atualição"
          nullable: true
        lastUpdatedDateUtc:
          type: string
          description: "Data da ultima atualização"
          nullable: true
      additionalProperties: false     
    Decision.Configuration.Application.Features.Commands.Get.FeaturePreviewResponse:
      type: object
      properties:
        id:
          type: string
          description: "Identificador da Feature"
          nullable: uuid       
        name:
          type: string
          description: "Nome da Feature"
          nullable: true
        description:
          type: string
          description: "Descrição da Feature"
          nullable: true 
        version:
          Adicdescription: "Versão da Feature utilizando o padrão [SemVer](https://semver.org/)"
          type: string
          description: "Nome da Feature"
          nullable: true          
        sqlConnection:
          description: "Nome da conexão SQL"
          type: string
          nullable: true
        lastUpdateUserId:
          type: string
          description: "Usuário que realizou a última atualição"
          nullable: true
        lastUpdatedDateUtc:
          type: string
          description: "Data da ultima atualização"
          nullable: true
      additionalProperties: false
    Decision.Configuration.Application.Features.Commands.Get.FeatureLookupResponse:
      type: object
      properties:
        id:
          type: string
          description: "Identificador da Feature"
          nullable: uuid 
        name:
          type: string
          description: "Nome da Feature"
        description:
          type: string
          description: "Descrição da Feature"
        tags:
          type: string
          description: "Tags da Feature"  
      additionalProperties: false  
    Decision.Configuration.Application.Features.Commands.Get`1[System.Collections.Generic.List`1[Decision.Configuration.Application.Feature.Commands.Get.FeatureLookupResponse]]:
      type: array
      items:
        $ref: '#/components/schemas/Decision.Configuration.Application.Features.Commands.Get.FeatureLookupResponse'
      nullable: true
      additionalProperties: false
    Decision.Configuration.Application.Features.Commands.Get.FeatureVersionLookupResponse:
      type: object
      properties:
        id:
          type: string
          description: "Identificador da FeatureVersion"
          nullable: uuid 
        version:
          type: string
          description: "Versão da Feature utilizando o padrão [SemVer](https://semver.org/)"
          nullable: true
      additionalProperties: false  
    Decision.Configuration.Application.Features.Commands.Get`1[System.Collections.Generic.List`1[Decision.Configuration.Application.Feature.Commands.Get.FeatureVersionLookupResponse]]:
      type: array
      items:
        $ref: '#/components/schemas/Decision.Configuration.Application.Features.Commands.Get.FeatureVersionLookupResponse'
      nullable: true
      additionalProperties: false
    Decision.Configuration.Application.Features.Commands.Get.FeatureVariableLookupResponse:
      type: object
      properties:
        id:
          type: string
          description: "Identificador da Feature Variable"
          nullable: uuid 
        name:
          type: string
          description: "Nome da Feature Variable"
          nullable: true
      additionalProperties: false  
    Decision.Configuration.Application.Features.Commands.Get`1[System.Collections.Generic.List`1[Decision.Configuration.Application.Feature.Commands.Get.FeatureVariableLookupResponse]]:
      type: array
      items:
        $ref: '#/components/schemas/Decision.Configuration.Application.Features.Commands.Get.FeatureVariableLookupResponse'
      nullable: true
      additionalProperties: false        
    Decision.Configuration.Application.Features.Commands.Create.CreateFeatureCommand:
      type: object
      properties:
        name:
          type: string
          nullable: true
        creationUserId:
          type: string
          nullable: true
        caosName:
          type: string
          nullable: true
        tags:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        sqlConnectionId:
          type: string
          format: uuid
        dependencies:
          type: array
          items:
            $ref: >-
              #/components/schemas/Decision.Configuration.Application.Features.Commands.Create.CreateFeatureDependencyCommand
          nullable: true
        sqlCode:
          type: string
          nullable: true
        schemaName:
          type: string
          nullable: true
        timeout:
          type: integer
          format: int32
          nullable: true
        userInformation:
          $ref: >-
            #/components/schemas/Decision.Configuration.Application.Users.UserInformation
      additionalProperties: false
    Decision.Configuration.Application.Features.Commands.Create.CreateFeatureDependencyCommand:
      type: object
      properties:
        source:
          $ref: >-
            #/components/schemas/Decision.Configuration.Application.Features.DependencyType
        outputId:
          type: string
          format: uuid
        alias:
          type: string
          nullable: true
        resource:
          type: string
          nullable: true
        version:
          type: string
          nullable: true
        output:
          type: string
          nullable: true
        type:
          type: string
          nullable: true
      additionalProperties: false
    Decision.Configuration.Application.Features.DependencyType:
      enum:
        - 0
        - 1
      type: integer
      format: int32
    Decision.Configuration.Application.StatisticalModels.Commands.Create.CreateStatisticalModelCommand:
      type: object
      properties:
        name:
          type: string
          nullable: true
        description:
          type: string
          nullable: true
        tags:
          type: string
          nullable: true
        dependencies:
          type: array
          items:
            $ref: >-
              #/components/schemas/Decision.Configuration.Application.StatisticalModels.Commands.Create.CreateStatisticalModelDependencyCommand
          nullable: true
        endpoint:
          type: string
          nullable: true
        secondaryendpoint:
          type: string
          nullable: true
        primaryauthenticationkey:
          type: string
          nullable: true
        secondaryauthenticationkey:
          type: string
          nullable: true
        userId:
          type: string
          nullable: true
      additionalProperties: false
    Decision.Configuration.Application.StatisticalModels.Commands.Create.CreateStatisticalModelDependencyCommand:
      type: object
      properties:
        source:
          $ref: >-
            #/components/schemas/Decision.Configuration.Application.StatisticalModels.DependencyType
        outputId:
          type: string
          format: uuid
        alias:
          type: string
          nullable: true
      additionalProperties: false
    Decision.Configuration.Application.StatisticalModels.DependencyType:
      enum:
        - 0
        - 1
        - 2
      type: integer
      format: int32
    Decision.Configuration.Application.Users.UserInformation:
      type: object
      properties:
        id:
          type: string
          nullable: true
        email:
          type: string
          nullable: true
      additionalProperties: false
    Decision.Configuration.Domain.Tests.SubjectType:
      enum:
        - 1
        - 2
        - 3
        - 4
        - 5
      type: integer
      format: int32
    Microsoft.AspNetCore.Mvc.ProblemDetails:
      type: object
      properties:
        type:
          type: string
          nullable: true
        title:
          type: string
          nullable: true
        status:
          type: integer
          format: int32
          nullable: true
        detail:
          type: string
          nullable: true
        instance:
          type: string
          nullable: true
      additionalProperties: {}
  securitySchemes:
    Bearer:
      type: http
      description: 'JWT Authorization, example: ''12345abcdef'''
      scheme: Bearer
security:
  - Bearer: []